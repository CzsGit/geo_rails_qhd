var Vcity={};Vcity._m={$:function(t,i){var e,n,a,s=[],c=t.substring(1);if(i=i||document,"string"==typeof t)switch(t.charAt(0)){case"#":return document.getElementById(c);case".":if(i.getElementsByClassName)return i.getElementsByClassName(c);for(e=Vcity._m.$("*",i),n=e.length,a=0;n>a;a++)e[a].className.indexOf(c)>-1&&s.push(e[a]);return s;default:return i.getElementsByTagName(t)}},on:function(t,i,e){t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent("on"+i,e)},getEvent:function(t){return t||window.event},getTarget:function(t){return t.target||t.srcElement},getPos:function(t){var i=document.documentElement.scrollLeft||document.body.scrollLeft,e=document.documentElement.scrollTop||document.body.scrollTop,n=t.getBoundingClientRect();return{top:n.top+e,right:n.right+i,bottom:n.bottom+e,left:n.left+i}},addClass:function(t,i){i&&(i.className=Vcity._m.hasClass(t,i)?i.className:i.className+" "+t)},removeClass:function(t,i){var e=new RegExp("(^|\\s+)"+t+"(\\s+|$)","g");Vcity._m.hasClass(t,i)&&(i.className=e.test(i.className)?i.className.replace(e,""):i.className)},hasClass:function(t,i){return i&&i.className?i.className.indexOf(t)>-1:!1},stopPropagation:function(t){t=t||window.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},trim:function(t){return t.replace(/^\s+|\s+$/g,"")}},Vcity.allCity=["\u82cf\u5dde|suzhou|sz","\u5357\u4eac|nanjing|nj","\u676d\u5dde|hangzhou|hz","\u4e0a\u6d77|shanghai|sh","\u90d1\u5dde|zhengzhou|zz","\u897f\u5b89|xian|xa","\u957f\u6c99|changsha|cs","\u5357\u660c|nanchang|nc","\u5e7f\u5dde|guangzhou|gz","\u91cd\u5e86|chongqing|cq","\u6210\u90fd|chengdu|cd","\u5408\u80a5|hefei|hf","\u6d4e\u5357|jinan|jn","\u9752\u5c9b|qingdao|qd","\u5170\u5dde|lanzhou|lz","\u5929\u6d25|tianjin|tj","\u62c9\u8428|lasa|ls","\u5317\u4eac|beijing|bj","\u53a6\u95e8|xiamen|xm","\u6df1\u5733|shenzhen|sz","\u6606\u660e|kunming|km","\u8d35\u9633|guiyang|gy","\u6c88\u9633|shenyang|sy","\u957f\u6625|changchun|cc","\u5eca\u574a|langfang|lf","\u7ecd\u5174|shaoxing|sx","\u5609\u5174|jiaxing|jx","\u91d1\u534e|jinhua|jh","\u65e0\u9521|wuxi|wx","\u9547\u6c5f|zhenjiang|zj","\u6e56\u5dde|huzhou|hz","\u5b81\u6ce2|ningbo|nb","\u8862\u5dde|quzhou|qz","\u6dee\u5b89|huaian|ha","\u4fdd\u5b9a|baoding|bd","\u5e38\u5dde|changzhou|cz","\u4f5b\u5c71|foshan|fs","\u90af\u90f8|handan|hd","\u626c\u5dde|yangzhou|yz","\u8861\u6c34|hengshui|hs","\u8087\u5e86|zhaoqing|zq","\u5927\u8fde|dalian|dl","\u90a2\u53f0|xingtai|xt","\u6b66\u6c49|wuhan|wh","\u6ca7\u5dde|cangzhou|cz","\u6cf0\u5dde|taizhou|tz","\u5357\u901a|nantong|nt","\u4e4c\u9c81\u6728\u9f50|wulumuqi|wlmq","\u8fde\u4e91\u6e2f|lianyungang|lyg","\u4e3d\u6c34|lishui|ls","\u798f\u5dde|fuzhou|fz","\u5f90\u5dde|xuzhou|xz","\u6e29\u5dde|wenzhou|wz","\u5bbf\u8fc1|suqian|sq","\u821f\u5c71|zhoushan|zs","\u6c5f\u95e8|jiangmen|jm","\u53f0\u5dde|taizhou|tz","\u4e1c\u839e|dongguan|dg","\u592a\u539f|taiyuan|ty","\u76d0\u57ce|yancheng|yc","\u77f3\u5bb6\u5e84|shijiazhuang|sjz","\u5357\u5b81|nanning|nn","\u897f\u5b81|xining|xn","\u547c\u548c\u6d69\u7279|huhehaote|hhht","\u627f\u5fb7|chengde|cd","\u94f6\u5ddd|yinchuan|yc","\u4e2d\u5c71|zhongshan|zs","\u5f20\u5bb6\u53e3|zhangjiakou|zjk","\u73e0\u6d77|zhuhai|zh","\u60e0\u5dde|huizhou|hz","\u6d77\u53e3|haikou|hk","\u5510\u5c71|tangshan|ts","\u79e6\u7687\u5c9b|qinhuangdao|qhd","\u54c8\u5c14\u6ee8|haerbin|heb"],Vcity.regEx=/^([\u4E00-\u9FA5\uf900-\ufa2d]+)\|(\w+)\|(\w)\w*$/i,Vcity.regExChiese=/([\u4E00-\u9FA5\uf900-\ufa2d]+)/,function(){var t,i,e=Vcity.allCity,n=Vcity.regEx,a=/^[a-f]$/i,s=/^[g-k]$/i,c=/^[l-p]$/i,o=/^[q-u]$/i,h=/^[v-z]$/i;if(!Vcity.oCity){Vcity.oCity={hot:{},ABCDEF:{},GHIJK:{},LMNOP:{},QRSTU:{},VWXYZ:{}};for(var l=0,y=e.length;y>l;l++)t=n.exec(e[l]),i=t[3].toUpperCase(),a.test(i)?(Vcity.oCity.ABCDEF[i]||(Vcity.oCity.ABCDEF[i]=[]),Vcity.oCity.ABCDEF[i].push(t[1])):s.test(i)?(Vcity.oCity.GHIJK[i]||(Vcity.oCity.GHIJK[i]=[]),Vcity.oCity.GHIJK[i].push(t[1])):c.test(i)?(Vcity.oCity.LMNOP[i]||(Vcity.oCity.LMNOP[i]=[]),Vcity.oCity.LMNOP[i].push(t[1])):o.test(i)?(Vcity.oCity.QRSTU[i]||(Vcity.oCity.QRSTU[i]=[]),Vcity.oCity.QRSTU[i].push(t[1])):h.test(i)&&(Vcity.oCity.VWXYZ[i]||(Vcity.oCity.VWXYZ[i]=[]),Vcity.oCity.VWXYZ[i].push(t[1])),24>l&&(Vcity.oCity.hot.hot||(Vcity.oCity.hot.hot=[]),Vcity.oCity.hot.hot.push(t[1]))}}(),Vcity._template=['<p class="citytip">\u70ed\u95e8\u57ce\u5e02(\u652f\u6301\u6c49\u5b57/\u62fc\u97f3)</p>',"<ul>",'<li class="on">\u70ed\u95e8\u57ce\u5e02</li>',"<li>ABCDEF</li>","<li>GHIJK</li>","<li>LMNOP</li>","<li>QRSTU</li>","<li>VWXYZ</li>","</ul>"],Vcity.CitySelector=function(){this.initialize.apply(this,arguments)},Vcity.CitySelector.prototype={constructor:Vcity.CitySelector,initialize:function(t){var i=t.input;this.input=Vcity._m.$("#"+i),this.inputEvent()},createWarp:function(){var t=Vcity._m.getPos(this.input),i=this.rootDiv=document.createElement("div"),e=this;Vcity._m.on(this.rootDiv,"click",function(t){Vcity._m.stopPropagation(t)}),Vcity._m.on(document,"click",function(t){t=Vcity._m.getEvent(t);var i=Vcity._m.getTarget(t);return i==e.input?!1:(e.cityBox&&Vcity._m.addClass("hide",e.cityBox),e.ul&&Vcity._m.addClass("hide",e.ul),void(e.myIframe&&Vcity._m.addClass("hide",e.myIframe)))}),i.className="citySelector",i.style.position="absolute",i.style.left=t.left+"px",i.style.top=t.bottom+"px",i.style.zIndex=999999;var n=document.all?!0:!1,a=this.isIE6=n&&!window.XMLHttpRequest;if(a){var s=this.myIframe=document.createElement("iframe");s.frameborder="0",s.src="about:blank",s.style.position="absolute",s.style.zIndex="-1",this.rootDiv.appendChild(this.myIframe)}var c=this.cityBox=document.createElement("div");c.className="cityBox",c.id="cityBox",c.innerHTML=Vcity._template.join("");var o=this.hotCity=document.createElement("div");o.className="hotCity",c.appendChild(o),i.appendChild(c),this.createHotCity()},createHotCity:function(){var t,i,e,n,a,s,c,o,h=[],l=(Vcity.regEx,Vcity.oCity);for(s in l){t=this[s]=document.createElement("div"),t.className=s+" cityTab hide",o=[];for(c in l[s])o.push(c),o.sort();for(var y=0,u=o.length;u>y;y++){i=document.createElement("dl"),e=document.createElement("dt"),n=document.createElement("dd"),e.innerHTML="hot"==o[y]?"&nbsp;":o[y],h=[];for(var m=0,r=l[s][o[y]].length;r>m;m++)a='<a href="javascript:">'+l[s][o[y]][m]+"</a>",h.push(a);n.innerHTML=h.join(""),i.appendChild(e),i.appendChild(n),t.appendChild(i)}Vcity._m.removeClass("hide",this.hot),this.hotCity.appendChild(t)}document.body.appendChild(this.rootDiv),this.changeIframe(),this.tabChange(),this.linkEvent()},tabChange:function(){for(var t=Vcity._m.$("li",this.cityBox),i=Vcity._m.$("div",this.hotCity),e=this,n=0,a=t.length;a>n;n++)t[n].index=n,t[n].onclick=function(){for(var n=0;a>n;n++)Vcity._m.removeClass("on",t[n]),Vcity._m.addClass("hide",i[n]);Vcity._m.addClass("on",this),Vcity._m.removeClass("hide",i[this.index]),e.changeIframe()}},linkEvent:function(){for(var t=Vcity._m.$("a",this.hotCity),i=this,e=0,n=t.length;n>e;e++)t[e].onclick=function(){i.input.value=this.innerHTML,Vcity._m.addClass("hide",i.cityBox),Vcity._m.addClass("hide",i.myIframe),getData()}},inputEvent:function(){var t=this;Vcity._m.on(this.input,"click",function(i){i=i||window.event,t.cityBox?t.cityBox&&Vcity._m.hasClass("hide",t.cityBox)&&(!t.ul||t.ul&&Vcity._m.hasClass("hide",t.ul))&&(Vcity._m.removeClass("hide",t.cityBox),Vcity._m.removeClass("hide",t.myIframe),t.changeIframe()):t.createWarp()}),Vcity._m.on(this.input,"focus",function(){t.input.select(),"\u57ce\u5e02\u540d"==t.input.value&&(t.input.value="")}),Vcity._m.on(this.input,"blur",function(){""==t.input.value&&(t.input.value="\u57ce\u5e02\u540d")}),Vcity._m.on(this.input,"keyup",function(i){i=i||window.event;var e=i.keyCode;Vcity._m.addClass("hide",t.cityBox),t.createUl(),Vcity._m.removeClass("hide",t.myIframe),!t.ul||Vcity._m.hasClass("hide",t.ul)||t.isEmpty||t.KeyboardEvent(i,e)})},createUl:function(){var t,i=Vcity._m.trim(this.input.value);if(""!==i){for(var e=new RegExp("^"+i+"|\\|"+i,"gi"),n=[],a=0,s=Vcity.allCity.length;s>a;a++)if(e.test(Vcity.allCity[a])){var c=Vcity.regEx.exec(Vcity.allCity[a]);t=0!==n.length?'<li><b class="cityname">'+c[1]+'</b><b class="cityspell">'+c[2]+"</b></li>":'<li class="on"><b class="cityname">'+c[1]+'</b><b class="cityspell">'+c[2]+"</b></li>",n.push(t)}if(this.isEmpty=!1,0==n.length&&(this.isEmpty=!0,t='<li class="empty">\u5bf9\u4e0d\u8d77\uff0c\u6ca1\u6709\u627e\u5230\u6570\u636e "<em>'+i+'</em>"</li>',n.push(t)),this.ul)this.ul&&Vcity._m.hasClass("hide",this.ul)&&(this.count=0,Vcity._m.removeClass("hide",this.ul));else{var o=this.ul=document.createElement("ul");o.className="cityslide",this.rootDiv&&this.rootDiv.appendChild(o),this.count=0}this.ul.innerHTML=n.join(""),this.changeIframe(),this.liEvent()}else Vcity._m.addClass("hide",this.ul),Vcity._m.removeClass("hide",this.cityBox),Vcity._m.removeClass("hide",this.myIframe),this.changeIframe()},changeIframe:function(){this.isIE6&&(this.myIframe.style.width=this.rootDiv.offsetWidth+"px",this.myIframe.style.height=this.rootDiv.offsetHeight+"px")},KeyboardEvent:function(t,i){var e=Vcity._m.$("li",this.ul),n=e.length;switch(i){case 40:this.count++,this.count>n-1&&(this.count=0);for(var a=0;n>a;a++)Vcity._m.removeClass("on",e[a]);Vcity._m.addClass("on",e[this.count]);break;case 38:for(this.count--,this.count<0&&(this.count=n-1),a=0;n>a;a++)Vcity._m.removeClass("on",e[a]);Vcity._m.addClass("on",e[this.count]);break;case 13:this.input.value=Vcity.regExChiese.exec(e[this.count].innerHTML)[0],Vcity._m.addClass("hide",this.ul),Vcity._m.addClass("hide",this.ul),Vcity._m.addClass("hide",this.myIframe),getData()}},liEvent:function(){for(var t=this,i=Vcity._m.$("li",this.ul),e=0,n=i.length;n>e;e++)Vcity._m.on(i[e],"click",function(i){i=Vcity._m.getEvent(i);var e=Vcity._m.getTarget(i);t.input.value=Vcity.regExChiese.exec(e.innerHTML)[0],Vcity._m.addClass("hide",t.ul),Vcity._m.addClass("hide",t.myIframe)}),Vcity._m.on(i[e],"mouseover",function(t){t=Vcity._m.getEvent(t);var i=Vcity._m.getTarget(t);Vcity._m.addClass("on",i)}),Vcity._m.on(i[e],"mouseout",function(t){t=Vcity._m.getEvent(t);var i=Vcity._m.getTarget(t);Vcity._m.removeClass("on",i)})}};